# 🍉 水果切割游戏 (Fruit Slice Game)

一个精确切割游戏，玩家需要用鼠标画线将水果分成尽可能接近 50:50 的两部分。

## 游戏特点

- 🎮 **15个关卡**：从简单到困难，逐步提升挑战
- 🍎 **4种水果**：西瓜、橙子、柠檬、苹果
- 🔷 **4种形状**：圆形、椭圆形、不规则多边形、星形
- ⏱️ **时间限制**：每关有倒计时，增加紧张感
- 🎯 **评分系统**：根据切割精度和剩余时间计算得分
- 💯 **最高分记录**：使用本地存储保存您的最佳成绩
- 📱 **响应式设计**：支持桌面和移动设备
- 🎵 **背景音乐**：轻松愉快的游戏音乐（可切换）
- 🔊 **音效系统**：切割音效和完美切割特效音
- 🏆 **排行榜系统**：
  - 首页全球排行榜（梅西、C罗等名人）
  - 游戏中实时排名（模拟在线玩家）
- 🔪 **刀形光标**：鼠标变成刀的样式
- ✨ **炫彩切割线**：青绿渐变色光效切割线

## 游戏玩法

### 基本操作
1. 点击"开始游戏"按钮
2. 按住鼠标左键（或触摸屏幕）拖拽画线
3. 释放鼠标完成切割
4. 尽量将水果分成 50:50 的两部分

### 评分标准
- **完美切割** (偏差 ≤ 2%)：100分
- **干得漂亮** (偏差 ≤ 5%)：85-99分
- **还不错** (偏差 ≤ 10%)：60-84分
- **继续努力** (偏差 > 10%)：0-59分

时间加成：剩余时间越多，额外获得最多10分

### 关卡设计

#### 关卡 1-3：简单难度
- 形状：圆形西瓜
- 时间：30秒
- 切割次数：1次
- 过关分数：70分

#### 关卡 4-6：中等难度
- 形状：椭圆形橙子（带旋转）
- 时间：25秒
- 切割次数：1次
- 过关分数：75分

#### 关卡 7-9：困难难度
- 形状：不规则多边形柠檬
- 时间：20秒
- 切割次数：1次
- 过关分数：80分

#### 关卡 10-12：专家难度
- 形状：五角星苹果
- 时间：18秒
- 切割次数：1次
- 过关分数：85分

#### 关卡 13-15：大师难度
- 形状：混合形状
- 时间：15秒
- 切割次数：2次
- 过关分数：90分

## 技术栈

- **HTML5**：页面结构
- **CSS3**：样式和动画
- **JavaScript (ES6+)**：游戏逻辑
- **Canvas API**：图形绘制

## 项目结构

```
fruit-slice-game/
├── index.html          # 主HTML文件
├── css/
│   └── style.css      # 样式文件
├── js/
│   ├── game.js        # 游戏主逻辑
│   ├── shapes.js      # 形状类（圆形、椭圆、不规则）
│   ├── slicer.js      # 切割逻辑和计算
│   ├── levels.js      # 关卡配置和管理
│   └── ui.js          # UI控制和交互
└── assets/
    ├── images/        # 水果纹理图片（预留）
    └── sounds/        # 音效（预留）
```

## 核心算法

### 面积分割计算
使用像素采样法计算切割比例：
1. 获取形状的边界框
2. 遍历每个像素点（使用采样步长优化性能）
3. 判断点是否在形状内
4. 判断点在切割线的哪一侧（使用叉积算法）
5. 统计两侧像素数，计算比例

### 点与线的位置判断
使用向量叉积判断点在线的哪一侧：
```
cross = (lineEnd.x - lineStart.x) * (point.y - lineStart.y) -
        (lineEnd.y - lineStart.y) * (point.x - lineStart.x)
```
如果叉积 > 0，点在线的左侧；否则在右侧。

## 如何运行

### 方法1：直接打开
直接双击 `index.html` 文件即可在浏览器中运行。

### 方法2：使用本地服务器
```bash
# 使用 Python 3
python3 -m http.server 8000

# 或使用 Python 2
python -m SimpleHTTPServer 8000

# 或使用 Node.js http-server
npx http-server
```

然后在浏览器中访问 `http://localhost:8000`

## 浏览器兼容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+
- ✅ 移动端浏览器（iOS Safari, Chrome Mobile）

## 视觉和音频效果

### 🎨 莫兰迪色系背景
游戏采用优雅的莫兰迪色系渐变背景（灰蓝、灰绿、浅紫），营造舒适的视觉体验。

### 🔪 刀形光标
鼠标光标设计成刀的形状，增强游戏沉浸感。拖动切割时光标会变成发光的青色。

### ✨ 炫彩切割线
- 青绿色渐变光效
- 发光阴影特效
- 端点高亮提示

### 🎵 音频系统
- **背景音乐**：可在右上角切换开关（🎵/🔇）
- **音效开关**：独立控制音效（🔊/🔇）
- **切割音效**：每次切割都有反馈音效
- **完美切割音**：达到完美切割时的特殊音效
- 设置会自动保存到本地

**添加音频文件**：将音频文件放在 `assets/sounds/` 目录：
- `background.mp3` - 背景音乐
- `slice.mp3` - 切割音效
- `perfect.mp3` - 完美切割音效

详见 `assets/sounds/README.md` 获取音频资源推荐。

### 🏆 排行榜系统

**首页全球排行榜**
- 显示顶级玩家（梅西、C罗、内马尔等）
- 展示最高分和国旗
- 当您的分数足够高时可进入榜单

**游戏中实时排名**
- 右侧实时显示当前局玩家排名
- 模拟5-7名在线玩家
- 您的排名会高亮显示
- 分数会实时更新（每3秒）
- 移动端自动隐藏以节省空间

## 未来改进方向

- [x] ~~添加音效和背景音乐~~
- [x] ~~实现排行榜系统~~
- [x] ~~优化视觉效果~~
- [ ] 添加真实的在线多人排行榜（需要后端）
- [ ] 添加更多水果种类和纹理
- [ ] 添加成就系统
- [ ] 支持多人对战模式
- [ ] 添加更多特殊形状和挑战关卡
- [ ] 添加教学关卡

## 开发者

基于 Claude Code 实现的 HTML5 游戏项目

## 许可证

MIT License - 自由使用和修改

---

享受游戏，挑战您的精准度！🎯
