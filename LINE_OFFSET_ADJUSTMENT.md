# 📏 线条偏移调整

## 调整内容

### 偏移量设置
```javascript
const offsetX = -28;  // 往左 28 像素（约一个刀的长度）
const offsetY = -6;   // 往上 6 像素（约 1/5 刀的长度）
```

### 应用位置
1. **鼠标按下**（handleMouseDown）：起点偏移
2. **鼠标移动**（handleMouseMove）：轨迹偏移

### 效果
- 红色起点标记会出现在点击位置的**左上方**
- 具体位置：左偏 28px，上偏 6px
- 这样线条恰好从刀尖延伸出来

## 视觉效果

### 之前（无偏移）
```
        🔪 ← 鼠标点击这里
        🔴 ← 红点在点击位置
         \
          \ ← 线条
```

### 现在（有偏移）
```
  🔴 ← 红点偏移到左上方
   \
    \
     🔪 ← 鼠标点击这里
      \
       \ ← 线条从刀尖延伸
```

## 测试方法

1. **点击测试**
   - 在画布上点击一次
   - 观察红色圆点位置
   - 应该在点击位置的左上方

2. **画线测试**
   - 慢慢画一条线
   - 观察线条起点
   - 线条应该从刀尖位置开始

3. **对角线测试**
   - 从左上角画到右下角
   - 线条应该流畅自然
   - 起点应该对齐刀尖

## 偏移量计算

### X 偏移（往左）
```
刀emoji大小: 32px
旋转角度: 135°
刀的对角线长度: 32 × sin(45°) ≈ 23px
实际使用: 28px（略大一些以确保对齐）
```

### Y 偏移（往上）
```
刀长度: 28px
1/5 长度: 28 ÷ 5 = 5.6px
实际使用: 6px（四舍五入）
```

## 如果需要微调

### 如果红点还是太右
增加 offsetX 的绝对值：
```javascript
const offsetX = -30;  // 从 -28 改为 -30
```

### 如果红点还是太左
减少 offsetX 的绝对值：
```javascript
const offsetX = -25;  // 从 -28 改为 -25
```

### 如果红点还是太下
增加 offsetY 的绝对值：
```javascript
const offsetY = -8;  // 从 -6 改为 -8
```

### 如果红点还是太上
减少 offsetY 的绝对值：
```javascript
const offsetY = -4;  // 从 -6 改为 -4
```

## 代码位置

在 `js/game.js` 文件中：
- 第 126-137 行：handleMouseDown 方法
- 第 139-147 行：handleMouseMove 方法

## 精确度

当前偏移量：
- X: -28 像素
- Y: -6 像素

预期精度：
- ±2 像素的误差是正常的
- 不同操作系统的emoji渲染可能略有差异

## 测试清单

- [ ] 点击画布，红点出现在左上方
- [ ] 红点位置看起来在刀尖附近
- [ ] 画线时，线条从刀尖延伸
- [ ] 整个轨迹都保持偏移一致
- [ ] 切割结果正常（能正确分割水果）

## 已知限制

1. **Emoji渲染差异**
   - Windows/Mac/Linux 的emoji大小可能略有不同
   - 这可能导致 ±2-3 像素的偏差

2. **浏览器差异**
   - Chrome/Firefox/Safari 的渲染可能略有差异
   - 建议在主要浏览器中测试

3. **屏幕缩放**
   - 如果浏览器缩放不是 100%，可能影响精度
   - 按 Ctrl+0 (或 Cmd+0) 重置缩放

## 对游戏的影响

### 视觉影响
- ✅ 线条看起来从刀尖出来
- ✅ 更符合物理直觉
- ✅ 提升沉浸感

### 游戏玩法影响
- ✅ 切割计算仍然准确
- ✅ 不影响分数判定
- ✅ 只是视觉上的调整

### 注意事项
- 用户现在需要记住：点击位置不是线条起点
- 线条会从点击位置的左上方开始
- 这模拟了真实的刀尖接触点

## 总结

通过添加 **(-28, -6)** 的偏移量：
- 线条现在从刀尖位置开始 ✅
- 符合用户的要求 ✅
- 视觉效果更自然 ✅

---

**现在测试游戏，看线条是否从刀尖出来！** 🔪
